<html>
<head></head>
<body>
	<div>
		<!---- The width and height here are not important, as what importants is the scale_canvas function !-->
		<canvas id='bitmap' width ='800' height = '400'></canvas>
	</div>
	<script>
		var CIRCLE_TIME = 1 * 60 * 200;
		var CIRCLE_RADIUS = 50;
		var FIELD_SIZE = 90;
		var time;

		scale_canvas(1);
		start();
		setInterval(loop,100);

		function start()
		{
			time = new Date().getTime();
		}
		function loop()
		{
			var element = document.getElementById("bitmap");
			var bitmap = element.getContext("2d");

			// Clear previous vectors
			bitmap.clearRect(0, 0, element.width, element.height);

			// Gets the circular field vector
			var angle = 360 * get_ratio();
			angle = radians(angle);
			var circle = [Math.sin(angle) * CIRCLE_RADIUS, Math.cos(angle) * CIRCLE_RADIUS];
			var zero = [element.width / 2, element.height / 2];
			var vector = circular_field(angle);

			// Makes adjustments between vectors and canvas points
			circle[0] += zero[0]
			circle[1] = (circle[1] + zero[1]);
			vector[0] += circle[0];
			vector[1] = (vector[1]+circle[1]);
			// Draws the vector
			bitmap.beginPath();
			bitmap.strokeStyle = "blue";
			bitmap.lineWidth = 5;
			bitmap.moveTo(circle[0], circle[1]);
			bitmap.lineTo(vector[0], vector[1]);
			bitmap.stroke();
			bitmap.strokeStyle = "black";
			// Draws the circle
			bitmap.beginPath();
			bitmap.lineWidth = 5;
			bitmap.arc(zero[0], zero[1], CIRCLE_RADIUS, 0, 2 * Math.PI);
			bitmap.stroke();
		
		}
		function line(bitmap, start, end, color)
		{
			bitmap.beginPath();
			bitmap.strokeStyle = color;
			bitmap.moveTo(start);
			bitmap.lineTo(end);
			bitmap.stroke();
			bitmap.strokeStyle = "black";
		}
		function circular_field(angle)
		{
			var a = Math.sin(angle);
			var b = Math.cos(angle);
			var x = 0, y = 0;
			if(b != 0)
			{
				var sign = b / Math.abs(b);
				x = 1 * sign;
				y = -a / b * sign;
				var length = Math.sqrt(x * x + y * y);
				x /= length;
				y /= length;
				x *= FIELD_SIZE;
				y *= FIELD_SIZE;
			}
			else
			{
				x = 0;
				y = -a * FIELD_SIZE;
			}
			var arr = [Math.round(x), Math.round(y)];
			return arr;
		}
		function radians(angle)
		{
			return angle * (Math.PI / 180)
		}
		function get_ratio()
		{
			var t = new Date().getTime();
			var span = ((t - time) % CIRCLE_TIME) / CIRCLE_TIME;
			return span; 
		}

		function scale_canvas(divide)
		{
			var width = window.innerWidth;
			var height = window.innerHeight;
			var element = document.getElementById("bitmap");
				element.width = width / divide;
				element.height = height / divide;
		}
	</script>
</body>
</html>
